# Snowflake Schema Validation Tool
A web-based application that allows users to pull SQL scripts from a Git repository, replace variables from Helm chart values, and validate the resulting SQL against a Snowflake connection. The main goal is to ensure SQL correctness before deployments.

---

## üéØ Purpose
The tool enables developers to:
1. Fetch SQL scripts from a Git repository.
2. Inject variable values defined in Helm charts.
3. View and edit the final SQL script.
4. Validate SQL against a Snowflake "playground" connection.
5. Determine whether SQL is valid based on error patterns (e.g., permission errors vs syntax errors).

---

## üß© Key Features

### **1. Git Integration**
- Ability to connect to a Git repository.
- Select branch and folder path.
- List and fetch SQL files from the repo.
- Load selected SQL file into the UI.

### **2. Helm Variable Replacement**
- Load and read `values.yaml` or other variable files from the repo.
- Apply variable substitution into the SQL template.
- Display the rendered SQL to the user.

### **3. SQL Editing Interface**
- Provide an online editor to:
  - View original script
  - View rendered script (after variable replacement)
  - Make changes if necessary
- Option to switch between original and rendered versions.

### **4. Snowflake Validation**
- Connect to a Snowflake environment designed only for validation.
- Run the rendered SQL against this environment.
- Capture and classify errors into:
  - Syntax errors ‚Üí INVALID
  - Compilation errors ‚Üí INVALID
  - Permission errors ‚Üí VALID (script is correct)
  - Successful execution ‚Üí VALID

### **5. Results Display**
- Show validation results clearly.
- Highlight lines where errors were detected.
- Provide friendly messages indicating whether SQL is valid.
- Allow export of results.

### **6. User Workflow**
1. User enters Git repo URL.
2. User selects branch.
3. UI loads and displays SQL files.
4. User chooses a file.
5. System loads Helm variables.
6. System renders final SQL.
7. User reviews SQL in editor.
8. User clicks **Validate**.
9. Backend validates SQL and returns:
   - Valid (permission-only failures)
   - Invalid (syntax/compilation issues)
10. Results shown in UI.

---

## üß≠ Non-Functional Requirements
- Clean, simple UI suitable for developers.
- Must never modify real Snowflake objects.
- Validation environment must be isolated and safe.
- Fast rendering and validation experience.
- Scalable approach to handle multiple users.

---

## üö¶ Validation Rules Summary
A script is considered:

### ‚úÖ **Valid**
- Executes without error  
**OR**
- Fails only with permission-related errors

### ‚ùå **Invalid**
- Syntax errors
- SQL compilation failures
- Incorrect SQL format
- Missing keywords or malformed statements

---

## üìÅ Outputs & Deliverables
The LLM/system should produce:

- A working UI for loading and editing SQL.
- Integration with Git to fetch SQL files.
- Variable replacement using Helm.
- A validation engine that runs SQL on Snowflake.
- A clean results panel for developers.
- Documentation on usage.

---

# End of Document
